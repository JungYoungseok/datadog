{"title":"Database Monitoring","description":"datadog_demo_keep:true (cloned)","widgets":[{"id":7184461509486312,"definition":{"title":"Summary","type":"group","background_color":"vivid_green","show_title":true,"layout_type":"ordered","widgets":[{"id":123209644452750,"definition":{"title":"CPU","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"avg:aws.rds.cpuutilization{*}","aggregator":"avg","conditional_formats":[{"comparator":">","palette":"white_on_red","value":35},{"comparator":">=","palette":"white_on_yellow","value":25},{"comparator":"<","palette":"white_on_green","value":15}]}],"autoscale":true,"precision":2},"layout":{"x":0,"y":0,"width":2,"height":2}},{"id":780929625438402,"definition":{"title":"Request","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"avg:mysql.performance.questions{*}","aggregator":"avg","conditional_formats":[{"comparator":">","palette":"white_on_red","value":30},{"comparator":">=","palette":"white_on_yellow","value":20},{"comparator":"<","palette":"white_on_green","value":10}]}],"autoscale":true,"precision":2},"layout":{"x":2,"y":0,"width":2,"height":2}},{"id":8134340431893568,"definition":{"title":"Slow Query Rate","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"max:mysql.performance.slow_queries{*}","aggregator":"max","conditional_formats":[{"comparator":">","palette":"white_on_red","value":5},{"comparator":">=","palette":"white_on_yellow","value":1},{"comparator":">=","palette":"white_on_green","value":0}]}],"autoscale":true,"precision":2},"layout":{"x":4,"y":0,"width":2,"height":2}},{"id":4860996954717216,"definition":{"title":"Lock Wait","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"avg:mysql.innodb.row_lock_waits{*}","aggregator":"avg","conditional_formats":[{"comparator":">=","palette":"white_on_yellow","value":1},{"comparator":"<","palette":"white_on_green","value":1}]}],"autoscale":true,"precision":2},"layout":{"x":6,"y":0,"width":2,"height":2}},{"id":4049184667692888,"definition":{"title":"Read","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"avg:mysql.performance.com_select{*}","aggregator":"avg","conditional_formats":[{"comparator":">","palette":"white_on_red","value":10},{"comparator":">=","palette":"white_on_yellow","value":5},{"comparator":"<","palette":"white_on_green","value":5}]}],"autoscale":true,"precision":2},"layout":{"x":8,"y":0,"width":2,"height":2}},{"id":3032154741714384,"definition":{"title":"Write","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"avg:mysql.performance.com_insert{*}+avg:mysql.performance.com_update{*}+avg:mysql.performance.com_update_multi{*}+avg:mysql.performance.com_delete{*}+avg:mysql.performance.com_delete_multi{*}","aggregator":"avg","conditional_formats":[{"comparator":">","palette":"white_on_red","value":10},{"comparator":">=","palette":"white_on_yellow","value":5},{"comparator":"<","palette":"white_on_green","value":5}]}],"autoscale":true,"precision":2},"layout":{"x":10,"y":0,"width":2,"height":2}}]},"layout":{"x":0,"y":0,"width":12,"height":1}},{"id":8888933430352626,"definition":{"title":"RDS Events","type":"group","background_color":"vivid_orange","show_title":true,"layout_type":"ordered","widgets":[{"id":5157400637933398,"definition":{"title":"","title_size":"16","title_align":"left","type":"event_stream","query":"source:amazon_rds","tags_execution":"and","event_size":"l"},"layout":{"x":0,"y":0,"width":6,"height":3}},{"id":7741281839758188,"definition":{"title":"","title_size":"16","title_align":"left","type":"event_stream","query":"status:error source:amazon_health","tags_execution":"and","event_size":"l"},"layout":{"x":6,"y":0,"width":6,"height":3}}]},"layout":{"x":0,"y":1,"width":12,"height":1}},{"id":4216591703721098,"definition":{"title":"RDS Status","type":"group","background_color":"vivid_blue","show_title":true,"layout_type":"ordered","widgets":[{"id":2098117234464050,"definition":{"title":"freeable_memory","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"","formula":"anomalies(query1, 'basic', 2)"}],"response_format":"timeseries","queries":[{"query":"avg:aws.rds.freeable_memory{*} by {dbinstanceidentifier}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":5155014687712542,"definition":{"title":"Memory","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"q":"anomalies(avg:aws.rds.freeable_memory{*}, 'basic', 2)","metadata":[{"expression":"anomalies(avg:aws.rds.freeable_memory{*}, 'basic', 2)","alias_name":"Freeable"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"anomalies(avg:aws.rds.swap_usage{*}, 'basic', 2)","metadata":[{"expression":"anomalies(avg:aws.rds.swap_usage{*}, 'basic', 2)","alias_name":"SwapCache"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":7864256931838322,"definition":{"title":"Buffer","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"q":"avg:aws.rds.buffer_cache_hit_ratio{*}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":6825371025517892,"definition":{"title":"CPU","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"q":"anomalies(avg:aws.rds.cpuutilization{*}, 'basic', 2)","metadata":[{"expression":"anomalies(avg:aws.rds.cpuutilization{*}, 'basic', 2)","alias_name":"Current"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"anomalies(week_before(avg:aws.rds.cpuutilization{*}), 'basic', 2)","metadata":[{"expression":"anomalies(week_before(avg:aws.rds.cpuutilization{*}), 'basic', 2)","alias_name":"Before Week"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":2,"width":4,"height":4}},{"id":2222325965014382,"definition":{"title":"Read IoPS","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"q":"anomalies(avg:aws.rds.read_iops{*}.as_count(), 'agile', 3)","metadata":[{"expression":"anomalies(avg:aws.rds.read_iops{*}.as_count(), 'agile', 3)","alias_name":"IoPS"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"anomalies(avg:aws.rds.read_latency{*}, 'basic', 2)","metadata":[{"expression":"anomalies(avg:aws.rds.read_latency{*}, 'basic', 2)","alias_name":"Latency"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":4,"y":2,"width":4,"height":2}},{"id":7999772602812290,"definition":{"title":"Network","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"q":"avg:aws.rds.network_receive_throughput{*}.as_count()","metadata":[{"expression":"avg:aws.rds.network_receive_throughput{*}.as_count()","alias_name":"RX"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"avg:aws.rds.network_transmit_throughput{*}.as_count()","metadata":[{"expression":"avg:aws.rds.network_transmit_throughput{*}.as_count()","alias_name":"TX"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":8,"y":2,"width":4,"height":2}},{"id":6869503901557266,"definition":{"title":"disk_queue_depth","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"IOPS","formula":"anomalies(query1, 'basic', 2)"}],"response_format":"timeseries","queries":[{"query":"avg:aws.rds.disk_queue_depth{*} by {dbinstanceidentifier}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":4,"y":4,"width":4,"height":2}},{"id":3157096477003540,"definition":{"title":"Write Iops","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"q":"anomalies(avg:aws.rds.write_iops{*}.as_count(), 'basic', 2)","metadata":[{"expression":"anomalies(avg:aws.rds.write_iops{*}.as_count(), 'basic', 2)","alias_name":"IOPS"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"anomalies(avg:aws.rds.write_latency{*}, 'basic', 2)","metadata":[{"expression":"anomalies(avg:aws.rds.write_latency{*}, 'basic', 2)","alias_name":"Latency"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":6,"width":4,"height":2}}]},"layout":{"x":0,"y":2,"width":12,"height":1}},{"id":2962340333582660,"definition":{"title":"Performance schema","type":"group","background_color":"vivid_yellow","show_title":true,"layout_type":"ordered","widgets":[{"id":4652026928468416,"definition":{"title":"Request","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"q":"anomalies(avg:mysql.performance.questions{*}, 'basic', 2)","metadata":[{"expression":"anomalies(avg:mysql.performance.questions{*}, 'basic', 2)","alias_name":"Current"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"anomalies(week_before(avg:mysql.performance.questions{*}), 'basic', 2)","metadata":[{"expression":"anomalies(week_before(avg:mysql.performance.questions{*}), 'basic', 2)","alias_name":"Week Before"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":5322584503027772,"definition":{"title":"Query / Before week query","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"q":"anomalies(avg:mysql.performance.queries{*}, 'basic', 2)","metadata":[{"expression":"anomalies(avg:mysql.performance.queries{*}, 'basic', 2)","alias_name":"Current"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"anomalies(week_before(avg:mysql.performance.queries{*}), 'basic', 2)","on_right_yaxis":false,"metadata":[{"expression":"anomalies(week_before(avg:mysql.performance.queries{*}), 'basic', 2)","alias_name":"Week Before"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"avg:mysql.performance.slow_queries{*}","on_right_yaxis":true,"metadata":[{"expression":"avg:mysql.performance.slow_queries{*}","alias_name":"SlowQuery"}],"style":{"palette":"orange","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"right_yaxis":{"min":"0","max":"30"},"markers":[]},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":6598516392120824,"definition":{"title":"Join","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"q":"avg:mysql.performance.select_full_join{*}","metadata":[{"expression":"avg:mysql.performance.select_full_join{*}","alias_name":"FullJoin"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"avg:mysql.performance.select_full_range_join{*}","on_right_yaxis":true,"metadata":[{"expression":"avg:mysql.performance.select_full_range_join{*}","alias_name":"FullRangeJoin"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"right_yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":352894097748650,"definition":{"title":"Request / Read + Write","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"q":"avg:mysql.performance.questions{*}, avg:mysql.performance.com_select{*}, avg:mysql.performance.com_insert{*}+avg:mysql.performance.com_update{*}+avg:mysql.performance.com_delete{*}+avg:mysql.performance.com_delete_multi{*}+avg:mysql.performance.com_update_multi{*}","on_right_yaxis":false,"metadata":[{"expression":"avg:mysql.performance.questions{*}","alias_name":"Request"},{"expression":"avg:mysql.performance.com_select{*}","alias_name":"Select"},{"expression":"avg:mysql.performance.com_insert{*}+avg:mysql.performance.com_update{*}+avg:mysql.performance.com_delete{*}+avg:mysql.performance.com_delete_multi{*}+avg:mysql.performance.com_update_multi{*}","alias_name":"Write"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":2,"width":4,"height":2}},{"id":7250410942706422,"definition":{"title":"CRUD","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"q":"anomalies(avg:mysql.performance.com_select{*}, 'basic', 2)","on_right_yaxis":false,"metadata":[{"expression":"anomalies(avg:mysql.performance.com_select{*}, 'basic', 2)","alias_name":"Select"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"anomalies(avg:mysql.performance.com_insert{*}, 'basic', 2)","on_right_yaxis":true,"metadata":[{"expression":"anomalies(avg:mysql.performance.com_insert{*}, 'basic', 2)","alias_name":"Insert"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"anomalies(avg:mysql.performance.com_update{*}, 'basic', 2)","on_right_yaxis":true,"metadata":[{"expression":"anomalies(avg:mysql.performance.com_update{*}, 'basic', 2)","alias_name":"Update"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"anomalies(avg:mysql.performance.com_delete{*}, 'basic', 2)","on_right_yaxis":true,"metadata":[{"expression":"anomalies(avg:mysql.performance.com_delete{*}, 'basic', 2)","alias_name":"Delete"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"right_yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":4,"y":2,"width":4,"height":2}},{"id":2185221158130322,"definition":{"title":"Lock & DeadLock","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"q":"avg:mysql.innodb.row_lock_waits{*}","metadata":[{"expression":"avg:mysql.innodb.row_lock_waits{*}","alias_name":"Row Lock"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"avg:aws.rds.deadlocks{*}.as_count()","on_right_yaxis":false,"metadata":[{"expression":"avg:aws.rds.deadlocks{*}.as_count()","alias_name":"Dead Lock"}],"style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"avg:mysql.performance.table_locks_waited.rate{*}","on_right_yaxis":false,"metadata":[{"expression":"avg:mysql.performance.table_locks_waited.rate{*}","alias_name":"Table Lock"}],"style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":8,"y":2,"width":4,"height":2}},{"id":4697609764385200,"definition":{"title":"Lock & DeadLock","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"q":"avg:mysql.innodb.row_lock_waits{*}","metadata":[{"expression":"avg:mysql.innodb.row_lock_waits{*}","alias_name":"Row Lock"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"avg:aws.rds.deadlocks{*}.as_count()","on_right_yaxis":false,"metadata":[{"expression":"avg:aws.rds.deadlocks{*}.as_count()","alias_name":"Dead Lock"}],"style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"avg:mysql.performance.table_locks_waited.rate{*}","on_right_yaxis":false,"metadata":[{"expression":"avg:mysql.performance.table_locks_waited.rate{*}","alias_name":"Table Lock"}],"style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":4,"width":4,"height":2}}]},"layout":{"x":0,"y":3,"width":12,"height":1}},{"id":485981293221906,"definition":{"title":"DB Runtime Query 특이사항","type":"group","background_color":"green","show_title":true,"layout_type":"ordered","widgets":[{"id":6661301334905972,"definition":{"title":"DB 쿼리호출 빈도 (점선은 한주전 호출 빈도)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"q":"sum:trace.mysql.query.hits{*}.as_count()","on_right_yaxis":false,"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"week_before(sum:trace.mysql.query.hits{*}.as_count())","on_right_yaxis":false,"style":{"palette":"dog_classic","line_type":"dotted","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":0,"width":12,"height":4}},{"id":1722761952431220,"definition":{"title":"2초이상 소요된 쿼리 트렌드","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"apm_query":{"index":"trace-search","search":{"query":"service:*mysql* @duration:>=2000000000"},"group_by":[{"sort":{"aggregation":"count","order":"desc"},"facet":"resource_name","limit":10}],"compute":{"aggregation":"count"}},"style":{"palette":"dog_classic"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":4,"width":12,"height":4}},{"id":4078988415912674,"definition":{"title":"2초 이상 소요된 쿼리 빈도 Top10","title_size":"16","title_align":"left","type":"query_table","requests":[{"apm_query":{"index":"trace-search","search":{"query":"service:*mysql* @duration:>=2000000000"},"group_by":[{"sort":{"aggregation":"count","order":"desc"},"facet":"resource_name","limit":10}],"compute":{"aggregation":"count"}}}]},"layout":{"x":0,"y":8,"width":12,"height":4}},{"id":2501874301331220,"definition":{"title":"DB 쿼리별 수행시간 트렌드","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"q":"avg:trace.mysql.query.duration{*} by {resource_name}","on_right_yaxis":false,"style":{"palette":"purple","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":12,"width":12,"height":4}}]},"layout":{"x":0,"y":4,"width":12,"height":17}},{"id":1868730012504458,"definition":{"title":"In Memory DB 특이사항","type":"group","background_color":"orange","show_title":true,"layout_type":"ordered","widgets":[{"id":5342104880277936,"definition":{"title":"Redis 호출 빈도 (점선은 한주전 호출 빈도)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"q":"sum:trace.redis.command.hits{*}.as_count()","on_right_yaxis":false,"style":{"palette":"purple","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"week_before(sum:trace.redis.command.hits{*}.as_count())","on_right_yaxis":false,"style":{"palette":"warm","line_type":"dotted","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":0,"width":12,"height":3}},{"id":2145588680433812,"definition":{"title":"500ns이상 소요된 Redis Command 트렌드","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"apm_query":{"index":"trace-search","search":{"query":"service:redis @duration:>500"},"group_by":[{"sort":{"aggregation":"count","order":"desc"},"facet":"resource_name","limit":10}],"compute":{"aggregation":"count"}},"style":{"palette":"dog_classic"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":3,"width":6,"height":4}},{"id":5561717949081072,"definition":{"title":"2초 이상 소요된 Redis Command Top10","title_size":"16","title_align":"left","type":"query_table","requests":[{"apm_query":{"index":"trace-search","search":{"query":"service:redis @duration:>=500"},"group_by":[{"sort":{"aggregation":"count","order":"desc"},"facet":"resource_name","limit":10}],"compute":{"aggregation":"count"}}}]},"layout":{"x":6,"y":3,"width":6,"height":4}},{"id":7049620299573142,"definition":{"title":"Redis Command error 트렌드","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"on_right_yaxis":false,"apm_query":{"index":"trace-search","search":{"query":"service:redis status:error"},"group_by":[{"sort":{"aggregation":"count","order":"desc"},"facet":"resource_name","limit":5},{"sort":{"aggregation":"count","order":"desc"},"facet":"error.type","limit":5},{"sort":{"aggregation":"count","order":"desc"},"facet":"@network.destination.ip","limit":5}],"compute":{"aggregation":"count"}},"style":{"palette":"orange"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":7,"width":6,"height":4}},{"id":7604360425660306,"definition":{"title":"Redis Command Error Top10","title_size":"16","title_align":"left","type":"query_table","requests":[{"apm_query":{"index":"trace-search","search":{"query":"service:redis status:error"},"group_by":[{"sort":{"aggregation":"count","order":"desc"},"facet":"resource_name","limit":10},{"sort":{"aggregation":"count","order":"desc"},"facet":"error.type","limit":10},{"sort":{"aggregation":"count","order":"desc"},"facet":"@network.destination.ip","limit":10}],"compute":{"aggregation":"count"}}}]},"layout":{"x":6,"y":7,"width":6,"height":4}}]},"layout":{"x":0,"y":21,"width":12,"height":12}},{"id":8993931390646204,"definition":{"title":"NoSQL DB(Mongo) 현황","type":"group","background_color":"vivid_green","show_title":true,"layout_type":"ordered","widgets":[{"id":5696119389633190,"definition":{"type":"image","url":"/static/images/saas_logos/bot/mongodb.png","sizing":"none","vertical_align":"center"},"layout":{"x":0,"y":0,"width":2,"height":2}},{"id":8887166448252752,"definition":{"title":"Available hosts","title_size":"13","title_align":"center","time":{"live_span":"30m"},"type":"check_status","check":"mongodb.can_connect","grouping":"cluster","tags":[]},"layout":{"x":2,"y":0,"width":2,"height":2}},{"id":5912267251963212,"definition":{"type":"note","content":"[Throughput](https://www.datadoghq.com/blog/monitoring-mongodb-performance-metrics-wiredtiger/#throughput)","background_color":"gray","font_size":"18","text_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"bottom"},"layout":{"x":4,"y":0,"width":4,"height":1}},{"id":6715775055304264,"definition":{"type":"note","content":"[Resource saturation](https://www.datadoghq.com/blog/monitoring-mongodb-performance-metrics-wiredtiger/#resource-saturation)","background_color":"gray","font_size":"18","text_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"bottom"},"layout":{"x":8,"y":0,"width":4,"height":1}},{"id":8294953004685600,"definition":{"title":"Read requests per second","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"4h"},"type":"timeseries","requests":[{"q":"sum:mongodb.opcounters.getmoreps{$var,*,*}, sum:mongodb.opcounters.queryps{$var,*,*}","style":{"palette":"green"},"display_type":"area"}],"custom_links":[]},"layout":{"x":4,"y":1,"width":3,"height":2}},{"id":1300286868825138,"definition":{"title":"Replica sets with largest read queues","title_size":"16","title_align":"left","time":{"live_span":"4h"},"type":"toplist","requests":[{"q":"top(sum:mongodb.globallock.currentqueue.readers{$var,*} by {replset_name}, 10, 'sum', 'desc')","style":{"palette":"green"}}],"custom_links":[]},"layout":{"x":8,"y":1,"width":4,"height":2}},{"id":5378858448679266,"definition":{"title":"Queued read and write requests per second","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"4h"},"type":"timeseries","requests":[{"q":"sum:mongodb.globallock.currentqueue.readers{$var,*,*}","style":{"palette":"green"},"display_type":"bars"},{"q":"sum:mongodb.globallock.currentqueue.writers{$var,*,*}","style":{"palette":"purple"},"display_type":"bars"}],"custom_links":[]},"layout":{"x":0,"y":2,"width":4,"height":2}},{"id":8868204514297666,"definition":{"title":"Write requests per second","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"4h"},"type":"timeseries","requests":[{"q":"sum:mongodb.opcounters.deleteps{$var,*,*}, sum:mongodb.opcounters.insertps{$var,*,*}, sum:mongodb.opcounters.updateps{$var,*,*}","style":{"palette":"purple"},"display_type":"area"}],"custom_links":[]},"layout":{"x":4,"y":3,"width":4,"height":2}},{"id":2239197753547538,"definition":{"title":"Most used replica sets for reads","title_size":"16","title_align":"left","time":{"live_span":"4h"},"type":"toplist","requests":[{"q":"top(sum:mongodb.opcounters.getmoreps{$var,*} by {replset_name}, 10, 'sum', 'desc')","style":{"palette":"green"}}],"custom_links":[]},"layout":{"x":8,"y":3,"width":4,"height":2}},{"id":7475778029668250,"definition":{"title":"Latency on service","title_size":"16","title_align":"left","show_legend":false,"type":"timeseries","requests":[{"q":"avg:trace.mongodb.query.duration.by.service.50p{env:prod,*}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"avg:trace.mongodb.query.duration.by.service.75p{env:prod,*}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"avg:trace.mongodb.query.duration.by.service.90p{env:prod,*}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"avg:trace.mongodb.query.duration.by.service.95p{env:prod,*}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"avg:trace.mongodb.query.duration.by.service.99p{env:prod,*}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"avg:trace.mongodb.query.duration.by.service.100p{env:prod,*}.rollup(max)","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"custom_links":[]},"layout":{"x":0,"y":4,"width":4,"height":2}},{"id":1365689345668254,"definition":{"title":"Historical p99 Latency on resource","title_size":"16","title_align":"left","show_legend":true,"type":"timeseries","requests":[{"q":"avg:trace.mongodb.query.duration.by.resource_service.99p{env:prod,service:ad-server-mongodb,*}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"day_before(avg:trace.mongodb.query.duration.by.resource_service.99p{env:prod,service:ad-server-mongodb,*})","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"week_before(avg:trace.mongodb.query.duration.by.resource_service.99p{env:prod,service:ad-server-mongodb,*})","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"custom_links":[]},"layout":{"x":4,"y":5,"width":4,"height":2}},{"id":1147537989447400,"definition":{"title":"Most used replica sets for writes","title_size":"16","title_align":"left","time":{"live_span":"4h"},"type":"toplist","requests":[{"q":"top(sum:mongodb.opcounters.deleteps{$var,*} by {replset_name}, 10, 'sum', 'desc')","style":{"palette":"purple"}}],"custom_links":[]},"layout":{"x":8,"y":5,"width":4,"height":2}},{"id":3061613261579990,"definition":{"title":"Replica sets with largest write queues","title_size":"16","title_align":"left","time":{"live_span":"4h"},"type":"toplist","requests":[{"q":"top(sum:mongodb.globallock.currentqueue.writers{$var,*} by {replset_name}, 10, 'sum', 'desc')","style":{"palette":"purple"}}],"custom_links":[]},"layout":{"x":0,"y":6,"width":4,"height":2}},{"id":266913780227342,"definition":{"title":"Percentage of client connections used (%)","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"4h"},"type":"timeseries","requests":[{"q":"100*sum:mongodb.connections.current{$var,*,*} by {replset_name}/(sum:mongodb.connections.current{$var,*,*} by {replset_name}+sum:mongodb.connections.available{$var,*,*} by {replset_name})","display_type":"line"}],"custom_links":[]},"layout":{"x":4,"y":7,"width":4,"height":2}},{"id":5968825406984888,"definition":{"title":"Number of clients with reads in progress or queued","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"4h"},"type":"timeseries","requests":[{"q":"sum:mongodb.globallock.activeclients.readers{$var,*,*}","style":{"palette":"green"},"display_type":"line"}],"custom_links":[]},"layout":{"x":8,"y":7,"width":4,"height":2}},{"id":1904658847772546,"definition":{"title":"Number of clients with writes in progress or queued","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"4h"},"type":"timeseries","requests":[{"q":"sum:mongodb.globallock.activeclients.writers{$var,*,*}","style":{"palette":"purple"},"display_type":"line"}],"custom_links":[]},"layout":{"x":0,"y":8,"width":4,"height":2}},{"id":4696659794626166,"definition":{"title":"Number of page faults per host","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"4h"},"type":"timeseries","requests":[{"q":"sum:mongodb.extra_info.page_faultsps{$var,*,*} by {host}","style":{"palette":"warm"},"display_type":"line"}],"custom_links":[]},"layout":{"x":4,"y":9,"width":4,"height":2}},{"id":8782483898256608,"definition":{"title":"Max memory usage","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"4h"},"type":"timeseries","requests":[{"q":"max:mongodb.mem.mapped{$var,*,*}","style":{"palette":"cool"},"display_type":"area"},{"q":"max:mongodb.mem.resident{$var,*,*}","style":{"palette":"cool"},"display_type":"area"},{"q":"max:mongodb.mem.virtual{$var,*,*}","style":{"palette":"cool"},"display_type":"area"}],"custom_links":[]},"layout":{"x":8,"y":9,"width":4,"height":2}},{"id":1153253399324586,"definition":{"title":"Error count on service ad-server-mongodb, resource find ad_repo… in datadog_app shopist","title_size":"16","title_align":"left","show_legend":false,"type":"timeseries","requests":[{"q":"sum:trace.mongodb.query.errors{env:prod,resource:251fa62429c82fc9,service:ad-server-mongodb,*}.as_count()","style":{"palette":"warm"},"display_type":"bars"}],"custom_links":[]},"layout":{"x":0,"y":10,"width":4,"height":2}},{"id":1492542222120094,"definition":{"title":"MongoDB events","title_size":"16","title_align":"left","time":{"live_span":"1w"},"type":"event_stream","query":"* source:mongodb","tags_execution":"and","event_size":"s"},"layout":{"x":4,"y":11,"width":4,"height":2}},{"id":2584445006292190,"definition":{"title":"Data size per replica set","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"4h"},"type":"timeseries","requests":[{"q":"avg:mongodb.stats.datasize{$var,*,*} by {replset_name}","style":{"palette":"cool"},"display_type":"line"}],"custom_links":[]},"layout":{"x":8,"y":11,"width":4,"height":2}},{"id":7959521697463460,"definition":{"title":"Oplog window per replica set","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"4h"},"type":"timeseries","requests":[{"q":"avg:mongodb.oplog.timediffseconds{$var,*,*} by {replset_name}","style":{"palette":"dog_classic"},"display_type":"line"}],"custom_links":[]},"layout":{"x":0,"y":12,"width":4,"height":2}},{"id":780942097352718,"definition":{"title":"Number of open cursors per replica set","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"4h"},"type":"timeseries","requests":[{"q":"sum:mongodb.metrics.cursor.open.total{$var,*,*} by {replset_name}","style":{"palette":"orange"},"display_type":"line"}],"custom_links":[]},"layout":{"x":4,"y":13,"width":4,"height":2}},{"id":1669820854547442,"definition":{"title":"Average duration of background flushes per replica set","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"4h"},"type":"timeseries","requests":[{"q":"avg:mongodb.backgroundflushing.average_ms{$var,*,*} by {replset_name}","display_type":"line"}],"custom_links":[]},"layout":{"x":8,"y":13,"width":4,"height":2}},{"id":8059399968580344,"definition":{"title":"Max Replication Lag per replica set","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"4h"},"type":"timeseries","requests":[{"q":"max:mongodb.replset.replicationlag{$var,*,*} by {replset_name}","display_type":"line"}],"custom_links":[]},"layout":{"x":0,"y":14,"width":4,"height":2}},{"id":8566774750961794,"definition":{"title":"Number of timed out cursors per replica set","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"4h"},"type":"timeseries","requests":[{"q":"sum:mongodb.cursors.timedout{$var,*,*} by {replset_name}","style":{"palette":"warm"},"display_type":"line"}],"custom_links":[]},"layout":{"x":4,"y":15,"width":4,"height":2}},{"id":1626143573728022,"definition":{"title":"Number of asserts per second","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"4h"},"type":"timeseries","requests":[{"q":"sum:mongodb.asserts.msgps{$var,*,*}, sum:mongodb.asserts.warningps{$var,*,*}, sum:mongodb.asserts.regularps{$var,*,*}, sum:mongodb.asserts.userps{$var,*,*}, avg:mongodb.asserts.rolloversps{$var,*,*}","style":{"palette":"warm"},"display_type":"bars"}],"custom_links":[]},"layout":{"x":8,"y":15,"width":4,"height":2}},{"id":2097594766300580,"definition":{"title":"Read requests per second","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"4h"},"type":"timeseries","requests":[{"q":"sum:mongodb.opcounters.getmoreps{$var,*,*}, sum:mongodb.opcounters.queryps{$var,*,*}","style":{"palette":"green"},"display_type":"area"}],"custom_links":[]},"layout":{"x":0,"y":16,"width":3,"height":2}},{"id":1461884927054622,"definition":{"title":"Queued read and write requests per second","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"4h"},"type":"timeseries","requests":[{"q":"sum:mongodb.globallock.currentqueue.readers{$var,*,*}","style":{"palette":"green"},"display_type":"bars"},{"q":"sum:mongodb.globallock.currentqueue.writers{$var,*,*}","style":{"palette":"purple"},"display_type":"bars"}],"custom_links":[]},"layout":{"x":3,"y":17,"width":4,"height":2}}]},"layout":{"x":0,"y":33,"width":12,"height":20,"is_column_break":true}},{"id":5424103965125762,"definition":{"title":"NoSQL DB Runtime Query 특이사항","type":"group","background_color":"purple","show_title":true,"layout_type":"ordered","widgets":[{"id":673938772892634,"definition":{"title":"DB 쿼리호출 빈도 (점선은 한주전 호출 빈도)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"q":"sum:trace.mongo.cmd.hits{*}.as_count()","on_right_yaxis":false,"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"week_before(sum:trace.mongo.cmd.hits{*}.as_count())","on_right_yaxis":false,"style":{"palette":"dog_classic","line_type":"dotted","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":0,"width":12,"height":4}},{"id":8356223294140572,"definition":{"title":"2초이상 소요된 쿼리 트렌드","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"apm_query":{"index":"trace-search","search":{"query":"service:*mongo* @duration:20000000"},"group_by":[{"sort":{"aggregation":"count","order":"desc"},"facet":"resource_name","limit":10}],"compute":{"aggregation":"count"}},"style":{"palette":"dog_classic"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":4,"width":12,"height":4}},{"id":2763852998866460,"definition":{"title":"20ms 이상 소요된 쿼리 빈도 Top10","title_size":"16","title_align":"left","type":"query_table","requests":[{"apm_query":{"index":"trace-search","search":{"query":"service:*mongo* @duration:20000000"},"group_by":[{"sort":{"aggregation":"count","order":"desc"},"facet":"resource_name","limit":10}],"compute":{"aggregation":"count"}}}]},"layout":{"x":0,"y":8,"width":12,"height":3}}]},"layout":{"x":0,"y":53,"width":12,"height":12}},{"id":5112746747865884,"definition":{"title":"Cassandra","type":"group","background_color":"gray","show_title":true,"layout_type":"ordered","widgets":[{"id":7062942890738156,"definition":{"type":"image","url":"https://images.techhive.com/images/article/2014/06/cassandra-logo-fxd-100310326-primary.idge.jpg","sizing":"fit"},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":4862760386151718,"definition":{"title":"SS Table Count","title_size":"16","title_align":"left","time":{"live_span":"4h"},"type":"query_value","requests":[{"q":"avg:cassandra.live_ss_table_count{$var} by {db}.rollup(max)","aggregator":"avg"}],"precision":1},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":597926527997890,"definition":{"title":"Disk Space Used","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"avg:cassandra.live_disk_space_used.count{*}","aggregator":"avg"}],"autoscale":true,"precision":0},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":8021647184352426,"definition":{"type":"note","content":"Logs","background_color":"vivid_blue","font_size":"18","text_align":"center","show_tick":false,"tick_pos":"50%","tick_edge":"bottom"},"layout":{"x":0,"y":2,"width":4,"height":2}},{"id":714270715450556,"definition":{"type":"note","content":"Basic Activity Monitor","background_color":"vivid_blue","font_size":"18","text_align":"center","show_tick":false,"tick_pos":"50%","tick_edge":"bottom"},"layout":{"x":4,"y":2,"width":4,"height":2}},{"id":8305575750267306,"definition":{"type":"note","content":"Throughput","background_color":"vivid_blue","font_size":"18","text_align":"center","show_tick":false,"tick_pos":"50%","tick_edge":"bottom"},"layout":{"x":8,"y":2,"width":4,"height":2}},{"id":7629914115438726,"definition":{"title":"Avg Capacity","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"avg:cassandra.capacity{*}","aggregator":"avg"}],"autoscale":true,"precision":2},"layout":{"x":0,"y":4,"width":4,"height":2}},{"id":6861847030963472,"definition":{"title":"Write request counts","show_legend":false,"type":"timeseries","requests":[{"q":"sum:cassandra.latency.one_minute_rate{*,*,*,clientrequest:write} by {datacenter,clientrequest}","display_type":"line"}]},"layout":{"x":4,"y":4,"width":4,"height":2}},{"id":1201931808494926,"definition":{"title":"Read request counts","show_legend":false,"type":"timeseries","requests":[{"q":"sum:cassandra.latency.one_minute_rate{*,*,*,clientrequest:read} by {datacenter,clientrequest}","display_type":"line"}]},"layout":{"x":8,"y":4,"width":4,"height":2}},{"id":2181705809759824,"definition":{"title":"","title_size":"16","title_align":"left","type":"log_stream","indexes":[],"query":"source:cassandra","sort":{"column":"time","order":"desc"},"columns":["core_host","core_service"],"show_date_column":true,"show_message_column":true,"message_display":"expanded-md"},"layout":{"x":0,"y":6,"width":4,"height":2}},{"id":8852908895201670,"definition":{"type":"note","content":"This overview dashboard displays the high-level health of your Cassandra clusters. You can use it as a jumping-off point for troubleshooting with our more specialized dashboards covering the [read path](https://app.datadoghq.com/dash/integration/24/cassandra---read-path), [write path](https://app.datadoghq.com/dash/integration/25/cassandra---write-path), and [SSTable management](https://app.datadoghq.com/dash/integration/234/cassandra---sstable-management). Further reading on Cassandra monitoring:\n\n- [Datadog's blog post describing our suite of Cassandra dashboards](https://www.datadoghq.com/blog/tlp-cassandra-dashboards/)\n\n- [Our guide to key metrics for Cassandra monitoring](https://www.datadoghq.com/blog/how-to-monitor-cassandra-performance-metrics/)\n\n\n- [How to collect Cassandra metrics using built-in Cassandra and JDK tools](https://www.datadoghq.com/blog/how-to-collect-cassandra-metrics/)\n\n- [How to monitor Cassandra using Datadog](https://www.datadoghq.com/blog/monitoring-cassandra-with-datadog/)\n\n- [Datadog's integration docs for Cassandra](https://docs.datadoghq.com/integrations/cassandra/)","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"},"layout":{"x":4,"y":6,"width":4,"height":2}},{"id":1215397257147602,"definition":{"title":"Write latencies - 75 and 95th percentiles","show_legend":false,"type":"timeseries","requests":[{"q":"avg:cassandra.latency.75th_percentile{type:clientrequest,clientrequest:write,*,*,*} by {datacenter,clientrequest}","display_type":"line"},{"q":"avg:cassandra.latency.95th_percentile{type:clientrequest,clientrequest:write,*,*,*} by {datacenter,clientrequest}","style":{"line_type":"dotted"},"display_type":"line"}]},"layout":{"x":8,"y":6,"width":4,"height":2}},{"id":6235959016991764,"definition":{"title":"Read latencies - 75 and 95th percentiles","show_legend":false,"type":"timeseries","requests":[{"q":"avg:cassandra.latency.75th_percentile{type:clientrequest,clientrequest:read,*,*,*} by {datacenter,clientrequest}","display_type":"line"},{"q":"avg:cassandra.latency.95th_percentile{type:clientrequest,clientrequest:read,*,*,*} by {datacenter,clientrequest}","style":{"line_type":"dotted"},"display_type":"line"}]},"layout":{"x":0,"y":8,"width":4,"height":2}},{"id":4401137740964556,"definition":{"type":"note","content":"Resource Utilization","background_color":"vivid_blue","font_size":"18","text_align":"center","show_tick":false,"tick_pos":"50%","tick_edge":"bottom"},"layout":{"x":4,"y":8,"width":4,"height":2}},{"id":6880707325021510,"definition":{"title":"Total disk usage","type":"toplist","requests":[{"q":"top(max:cassandra.total_disk_space_used.count{*} by {host,device}, 10, 'max', 'desc')"}]},"layout":{"x":8,"y":8,"width":4,"height":2}},{"id":8538562807851400,"definition":{"title":"DB Load","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"q":"avg:cassandra.db.load{*} by {datacenter,host}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":10,"width":4,"height":2}},{"id":3170340222973886,"definition":{"title":"Dropped messages","show_legend":false,"type":"timeseries","requests":[{"q":"avg:cassandra.dropped.one_minute_rate{*,*,*} by {host,droppedmessage,datacenter}","display_type":"line"}],"markers":[{"label":"That many dropped messages is definitely an issue!","value":"y = 50","display_type":"error dashed"},{"label":"It happens that some messages get dropped...","value":"y = 10","display_type":"warning solid"}]},"layout":{"x":4,"y":10,"width":4,"height":2}},{"id":5912657067394048,"definition":{"title":"Other operations request counts","show_legend":false,"type":"timeseries","requests":[{"q":"avg:cassandra.latency.one_minute_rate{*,*,*,clientrequest:casread} by {datacenter,clientrequest}","display_type":"line"},{"q":"avg:cassandra.latency.one_minute_rate{*,*,*,clientrequest:caswrite} by {datacenter,clientrequest}","display_type":"line"},{"q":"avg:cassandra.latency.one_minute_rate{*,*,*,clientrequest:rangeslice} by {datacenter,clientrequest}","display_type":"line"},{"q":"avg:cassandra.latency.one_minute_rate{*,*,*,clientrequest:viewwrite} by {datacenter,clientrequest}","display_type":"line"}]},"layout":{"x":8,"y":10,"width":4,"height":2}},{"id":2486022318312742,"definition":{"title":"Max row size per host and table","type":"toplist","requests":[{"q":"top(max:cassandra.max_row_size{*} by {host,columnfamily}, 10, 'max', 'desc')"}]},"layout":{"x":0,"y":12,"width":4,"height":2}},{"id":7351893350423060,"definition":{"title":"Max partition size per host and table (C*3+)","type":"toplist","requests":[{"q":"top(max:cassandra.max_partition_size{*,*,*} by {host,table}, 10, 'max', 'desc')"}]},"layout":{"x":4,"y":12,"width":4,"height":2}},{"id":309404740474700,"definition":{"title":"Pending compactions per host","show_legend":false,"type":"timeseries","requests":[{"q":"max:cassandra.pending_compactions{*,*,*} by {environment,host,datacenter}","display_type":"line"}],"markers":[{"label":"Some pending compactions are not an issue...","value":"y = 10","display_type":"warning dashed"},{"label":"This is too many pending compactions!","value":"y = 100","display_type":"error solid"}]},"layout":{"x":8,"y":12,"width":4,"height":2}},{"id":1834165700362528,"definition":{"title":"Other operations latencies - 75 and 95th percentiles","show_legend":false,"type":"timeseries","requests":[{"q":"avg:cassandra.latency.75th_percentile{type:clientrequest,clientrequest:casread,*,*,*} by {datacenter,clientrequest}","display_type":"line"},{"q":"avg:cassandra.latency.75th_percentile{type:clientrequest,clientrequest:caswrite,*,*,*} by {datacenter,clientrequest}","display_type":"line"},{"q":"avg:cassandra.latency.75th_percentile{type:clientrequest,clientrequest:rangeslice,*,*,*} by {datacenter,clientrequest}","display_type":"line"},{"q":"avg:cassandra.latency.75th_percentile{type:clientrequest,clientrequest:viewwrite,*,*,*} by {datacenter,clientrequest}","display_type":"line"},{"q":"avg:cassandra.latency.95th_percentile{type:clientrequest,clientrequest:casread,*,*,*} by {datacenter,clientrequest}","style":{"line_type":"dotted"},"display_type":"line"},{"q":"avg:cassandra.latency.95th_percentile{type:clientrequest,clientrequest:caswrite,*,*,*} by {datacenter,clientrequest}","style":{"line_type":"dotted"},"display_type":"line"},{"q":"avg:cassandra.latency.95th_percentile{type:clientrequest,clientrequest:rangeslice,*,*,*} by {datacenter,clientrequest}","style":{"line_type":"dotted"},"display_type":"line"},{"q":"avg:cassandra.latency.95th_percentile{type:clientrequest,clientrequest:viewwrite,*,*,*} by {datacenter,clientrequest}","style":{"line_type":"dotted"},"display_type":"line"}]},"layout":{"x":0,"y":14,"width":4,"height":2}}]},"layout":{"x":0,"y":65,"width":12,"height":17}}],"template_variables":[{"name":"var","default":"*","prefix":"","available_values":[]}],"layout_type":"ordered","is_read_only":false,"notify_list":[],"reflow_type":"fixed","id":"4ij-866-c5q"}